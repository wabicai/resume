# 9.ä»€ä¹ˆæ˜¯åƒç´ 

è½¬è‡ªï¼šé”åŸº

ä¸ªäººæ€»ç»“ï¼š

- 1px å°±æ˜¯ 1 ä¸ªåƒç´ ï¼Œè€Œ 1 ä¸ªåƒç´ å°±æ˜¯å±å¹•ä¸Šä¸€ä¸ªç‚¹çš„å¤§å°ï¼Œè¿™ä¸ªç‚¹ç©¶ç«Ÿæœ‰å¤šå¤§ï¼Œæ˜¯ç”±æ˜¾ç¤ºå™¨çš„åˆ†è¾¨ç‡ä»¥åŠæ˜¾ç¤ºå™¨çš„ç‰©ç†å°ºå¯¸æ¥å†³å®šçš„

- **ç‰©ç†åƒç´ **ï¼šè®¾å¤‡å±å¹•å®é™…æ‹¥æœ‰çš„åƒç´ ç‚¹ã€‚
- **é€»è¾‘åƒç´ **ï¼šå¯ä»¥ç†è§£ä¸ºåæ˜ åœ¨ CSS/JS ä»£ç é‡Œçš„åƒç´ ç‚¹æ•°ã€‚

- dpr = ç‰©ç†åƒç´ /é€»è¾‘åƒç´ 

- ä»¥å‰ `CSS` å†™ä¸€ä¸ª `1px` ï¼Œå±å¹•å°±ä¼šç»™æ¸²æŸ“æˆ `1` ä¸ªå®é™…çš„åƒç´ ç‚¹ï¼Œå³ `dpr = 1`

## é¢è¯•å®˜ï¼šæˆ‘æ˜¯å°ç™½ï¼Œåƒç´ æ˜¯ä»€ä¹ˆï¼Ÿ

ä¸ªäººæ€»ç»“ï¼š

è¿‘å‡ å¤©é¢è¯•æ—¶è¢«é—®åˆ° `CSS` å•ä½æ—¶ï¼Œæ¶‰åŠåˆ°äº† `px` ï¼Œé¢è¯•å®˜åˆ™è¯´ï¼š

> æˆ‘ç°åœ¨å°±æ˜¯ä¸€ä¸ªå°ç™½ï¼Œéº»çƒ¦ä½ è·Ÿæˆ‘è®²ä¸€ä¸‹ä»€ä¹ˆå«åƒç´ ï¼Ÿ

ğŸ˜­ å®³ï¼Œæˆ‘æ”¯æ”¯å¾å¾åœ°è¯´äº†ç‰©ç†åƒç´ å’Œé€»è¾‘åƒç´ ï¼Œè¿˜æœ‰ `dpr` ï¼Œç„¶åè¢«é¢è¯•å®˜è¿½é—®äº†...

ä»¥å‰å†™ç§»åŠ¨ç«¯é¡µé¢çš„æ—¶å€™æœ‰ç®€å•çš„äº†è§£è¿‡ï¼Œä½†æ˜¯è‡³ä»Šä¹Ÿå·²ç»ä¸€å¹´å¤šäº†ï¼Œæ˜¯è¯¥å¥½å¥½æ¥æ€»ç»“ä¸€ä¸‹äº†ã€‚

## ä»€ä¹ˆæ˜¯åƒç´ ï¼Ÿ

> [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/åƒç´ ) ï¼šåƒç´ ï¼ˆpxï¼‰æ˜¯å½±åƒæ˜¾ç¤ºçš„åŸºæœ¬å•ä½ï¼Œè¯‘è‡ªè‹±æ–‡â€œpixelâ€ï¼Œpix æ˜¯è‹±è¯­å•è¯ picture çš„å¸¸ç”¨ç®€å†™ï¼ŒåŠ ä¸Šè‹±è¯­å•è¯â€œå…ƒç´ â€elementï¼Œå°±å¾—åˆ° pixelï¼Œæ•…â€œåƒç´ â€è¡¨ç¤ºâ€œç”»åƒå…ƒç´ â€ä¹‹æ„ï¼Œæœ‰æ—¶äº¦è¢«ç§°ä¸º pelï¼ˆpicture elementï¼‰ã€‚

ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼Œåƒç´ æ—¢ä¸æ˜¯ä¸€ä¸ªç¡®å®šçš„ç‰©ç†é‡ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªç‚¹æˆ–è€…å°æ–¹å—ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚æ‰€ä»¥åƒç´ åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æ‰€æè¿°çš„ä¸œè¥¿å¯èƒ½ä¸ä¸€æ ·ï¼Œä¸€èˆ¬åˆ†ä¸ºâ€œç‰©ç†åƒç´ â€å’Œâ€œé€»è¾‘åƒç´ â€

### ç‰©ç†åƒç´ ï¼ˆè®¾å¤‡åƒç´ ï¼‰

**è®¾å¤‡å±å¹•å®é™…æ‹¥æœ‰å¾ˆå¤šåƒç´ ï¼Œå®ƒæ˜¯å±å¹•çš„åŸºæœ¬å•å…ƒï¼Œæ˜¯æœ‰å®ä½“çš„ã€‚**æ¯”å¦‚ `iPhone 6` çš„å±å¹•åœ¨å®½åº¦æ–¹å‘æœ‰ `750` ä¸ªåƒç´ ï¼Œé«˜åº¦æ–¹å‘æœ‰ `1334` ä¸ªåƒç´ ç‚¹ï¼Œé‚£ä¹ˆ `iPhone 6` å°±æ€»å…±æœ‰ `750 * 1334` ä¸ªåƒç´ ç‚¹

1. ä»å‡ºå‚å°±å›ºå®šäº†ï¼Œå•ä½ä¸º ptï¼Œæ¯ä¸ªæ‰‹æœºçš„ç‰©ç†åƒç´ æ˜¯å›ºå®šçš„ï¼Œæœ‰å®ä½“çš„ã€‚

å±å¹•æ™®éé‡‡ç”¨ `RGB` è‰²åŸŸï¼ˆçº¢ã€ç»¿ã€è“ä¸‰ä¸ªå­åƒç´ æ„æˆï¼‰ï¼Œåœ¨å°åˆ·è¡Œä¸šæ™®éä½¿ç”¨ `CMYK` è‰²åŸŸï¼ˆé’ã€å“çº¢ã€é»„å’Œé»‘è‰²ï¼‰ï¼Œå¦‚å›¾ï¼š

![image](https://cdn.nlark.com/yuque/0/2021/jpeg/587100/1615704729437-c0993f1a-75f1-422e-a50c-5c29a0d0f557.jpeg)

### é€»è¾‘åƒç´ 

ä¹Ÿå«â€œè®¾å¤‡ç‹¬ç«‹åƒç´ â€ï¼ˆDIPï¼Œdevice independent pixelsï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºæ”¾æ˜ åœ¨ `CSS/JS` ç¨‹åºä¸­çš„åƒç´ ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ `CSS` åƒç´ å°±æ˜¯é€»è¾‘åƒç´ çš„ä¸€ç§ã€‚å¹³æ—¶æè¿°ä¸€å¼ å›¾ç‰‡çš„å®½é«˜æ—¶ä¹Ÿæ˜¯æŒ‡é€»è¾‘åƒç´ ã€‚

#### 1. è®¾å¤‡ç‹¬ç«‹åƒç´ 

1. è®¾å¤‡ç‹¬ç«‹åƒç´ ä¸è®¾å¤‡æ— å…³çš„**é€»è¾‘åƒç´ **ã€‚å¯ä»¥é€šè¿‡ç¨‹åºæ§åˆ¶çš„ï¼Œæ˜¯ä¸€ä¸ªæ€»ä½“æ¦‚å¿µï¼ŒåŒ…æ‹¬ px
2. åˆ†è¾¨ç‡ï¼ˆéä¸¥ç¦çš„è¯´ï¼‰å°±æ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ ã€‚æ¯”å¦‚åˆ†è¾¨ç‡ï¼š375 \* 667ï¼Œå°±æ˜¯äººå·¥æŠŠå±å¹•åˆ†ä¸ºï¼šå®½ 375 ä¸ªæ–¹å—ï¼Œé«˜ 667 ä¸ªæ–¹å—ã€‚
3. ä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ å¯èƒ½æœ‰ 1 ä¸ªæˆ–å¤šä¸ªç‰©ç†åƒç´ ç‚¹ï¼ŒåŒ…å«è¶Šå¤šï¼Œå±å¹•è¶Šæ¸…æ™°

#### 2. px æ˜¯ç›¸å¯¹å•ä½ï¼Œç›¸å¯¹çš„æ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ 

1. ä¸€èˆ¬æƒ…å†µï¼Œé¡µé¢ç¼©æ”¾æ¯” 1:1 æ—¶ï¼Œ1px å°±æ˜¯ä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ 
2. åŒä¸ªè®¾å¤‡ï¼Œè°ƒæ•´åˆ†è¾¨ç‡å¯ä»¥æ”¹å˜ 1px çš„å€¼ã€‚
3. é¡µé¢æ”¾å¤§ä¸€å€ï¼ŒåŸæ¥ 1px å˜æˆ 2pxã€‚å°±æ˜¯å˜æˆ 2px çš„å®½é«˜äº†ã€‚å‡è®¾åŸæ¥ 320px å¡«æ»¡ï¼Œç°åœ¨åªéœ€è¦ 160px

å³ï¼šç‰©ç†åƒç´ =ã€‹è®¾å¤‡ç‹¬ç«‹åƒç´ =ã€‹px

## ä¸ºä»€ä¹ˆè¦æœ‰è®¾å¤‡ç‹¬ç«‹åƒç´ å’Œè®¾å¤‡åƒç´ 

- iPhone3GS å’Œ iPhone å°ºå¯¸éƒ½æ˜¯ 3.5 å¯¸ï¼Œä½†æ˜¯ iPhone4 çš„ç‰©ç†åˆ†è¾¨ç‡æ˜¯ 640Ã—960ï¼ŒiPhone3GS ç‰©ç†åˆ†è¾¨ç‡æ˜¯ 320Ã—480ã€‚å¦‚æœæŒ‰ç…§çœŸå®ç‰©ç†åƒç´ å¸ƒå±€ï¼Œåˆ° 640 ç‰©ç†åƒç´ çš„æ‰‹æœºå°±ä¼šæœ‰ä¸€åŠç©ºç™½ã€‚ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œå°±äº§ç”Ÿäº†è™šæ‹Ÿåƒç´ å•ä½ã€‚

1. è®¾ä¸¤ç§æ‰‹æœºéƒ½æ˜¯ 320 ä¸ªè™šæ‹Ÿåƒç´ ï¼Œåªæ˜¯åœ¨ iPhone3GS ä¸Šï¼Œ1 ä¸ªè™šæ‹Ÿåƒç´ å°±æ˜¯ 1 ä¸ªç‰©ç†åƒç´ ã€‚iPhone4 ä¸Šï¼Œ1 ä¸ªè™šæ‹Ÿåƒç´ å°±æ˜¯ 2 ä¸ªç‰©ç†åƒç´ ã€‚
2. 1 ä¸ªè™šæ‹Ÿåƒç´ è¢«æ¢ç®—æˆå‡ ä¸ªç‰©ç†åƒç´ ï¼Œè¿™ä¸ªæˆ‘ä»¬ç§°ä¹‹ä¸ºè®¾å¤‡åƒç´ æ¯”ï¼Œä¹Ÿå°±æ˜¯ dprã€‚
3. è®¾å¤‡åƒç´ æ¯” 1:1ï¼Œä½¿ç”¨ 1ï¼ˆ1Ã—1ï¼‰ä¸ªç‰©ç†åƒç´ æ˜¾ç¤º 1 ä¸ªé€»è¾‘åƒç´ ==1pxï¼ˆé¡µé¢ç¼©æ”¾æ¯” 1:1 æ—¶ï¼‰
4. è®¾å¤‡åƒç´ æ¯” 3:1ï¼Œä½¿ç”¨ 9ï¼ˆ3Ã—3ï¼‰ä¸ªç‰©ç†åƒç´ æ˜¾ç¤º 1 ä¸ªé€»è¾‘åƒç´ ==1pxï¼ˆé¡µé¢ç¼©æ”¾æ¯” 1:1 æ—¶ï¼‰

### è®¾å¤‡åƒç´ æ¯”ï¼ˆDevice Pixel Ratioï¼Œå³ DPRï¼‰

DPR æ˜¯ä¸€ä¸ªè®¾å¤‡çš„ç‰©ç†åƒç´ ä¸é€»è¾‘åƒç´ çš„æ¯”ç‡ï¼Œå³ dpr = ç‰©ç†åƒç´  / é€»è¾‘åƒç´ 

> åƒç´ ä¸ºä»€ä¹ˆä¼šæœ‰â€œç‰©ç†åƒç´ â€å’Œâ€œé€»è¾‘åƒç´ â€ä¹‹åˆ†ï¼Ÿ

åœ¨ä»¥å‰ç¡®å®æ˜¯æ²¡æœ‰åŒºåˆ«ï¼Œ `CSS` å†™ä¸€ä¸ª `1px` ï¼Œå±å¹•å°±ä¼šç»™æ¸²æŸ“æˆ `1` ä¸ªå®é™…çš„åƒç´ ç‚¹ï¼Œå³ `dpr = 1`

åæ¥è‹¹æœå…¬å¸ä¸ºå…¶äº§å“ `mac` ã€ `iPhone` ä»¥åŠ `iPad` çš„å±å¹•é…ç½®äº† `Retina` é«˜æ¸…å±ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§å±å¹•æ‹¥æœ‰çš„ç‰©ç†åƒç´ ç‚¹æ•°æ¯”éé«˜æ¸…å¹³å¤š `4` å€ç”šè‡³æ›´å¤šã€‚

å¦‚æœä»ç„¶æŒ‰ç…§ `dpr = 1` è¿›è¡Œå±•ç¤ºï¼Œé‚£ä¹ˆåŒæ ·çš„é©¿ç«™å›¾ç‰‡åœ¨é«˜æ¸…å±ä¸Šæ˜¾ç¤ºçš„åŒºåŸŸé¢ç§¯ä¼šæ˜¯éé«˜æ¸…å±çš„ `1/4` ï¼Œç”±äºå›¾ç‰‡åœ¨å±å¹•ä¸Šçš„å±•ç¤ºé¢ç§¯å¤§å¤§ç¼©å°ï¼Œä¹Ÿä¼šå¯¼è‡´â€œæ¨¡ç³Šâ€çš„é—®é¢˜ã€‚

æ—¢ç„¶è‹¹æœå…¬å¸æ¨å‡ºäº† `Retina` æŠ€æœ¯ï¼Œé‚£ä¹ˆå®ƒå¸¦æ¥é«˜æ¸…å±•ç¤ºçš„å‰æä¸‹ä¹Ÿè¦è§£å†³ `dpr = 1` çš„é—®é¢˜ã€‚è§£å†³çš„æ–¹æ¡ˆå°±æ˜¯è®© `dpr !== 1` ã€‚è‹¹æœå…¬å¸ç»è¿‡ä¸€ç³»åˆ—æŠ€æœ¯ä½¿ç”¨ `4` ä¸ªä¹ƒè‡³æ›´å¤šç‰©ç†åƒç´ æ¥æ¸²æŸ“ `1` ä¸ªé€»è¾‘åƒç´ ï¼Œè¿™æ ·ï¼ŒåŒæ ·çš„ `CSS` ä»£ç è®¾ç½®çš„å°ºå¯¸ï¼Œåœ¨ `Retina` å’Œé `Retina` å±ä¸Šçœ‹èµ·æ¥å¤§å°ä¸€æ ·ï¼Œä½†æ˜¯é«˜æ¸…å±çš„è¦ç²¾ç»†çš„å¤šï¼å¦‚å›¾ï¼š

![image](https://cdn.nlark.com/yuque/0/2021/jpeg/587100/1615705387731-032d8bcf-269b-41fe-9137-16d8148918d3.jpeg)

![image](https://cdn.nlark.com/yuque/0/2021/jpeg/587100/1615706488493-effa7593-0cd6-4002-8035-de36678c5bed.jpeg)

ä¸¾ä¸ª ğŸŒ°ï¼š

ä¸Šé¢è¯´åˆ° `iPhone` çš„ç‰©ç†åƒç´ æ˜¯ `750 * 1334` ï¼Œé‚£å®ƒçš„é€»è¾‘åƒç´ å‘¢ï¼Ÿ

åœ¨ `Safari` æ‰“å° `screen.width` å’Œ `screen.height` å¾—åˆ°ï¼š `375 * 667` ã€‚

å› æ­¤æ˜“å¾— `dpr = 750 / 375 = 2` ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ `window.devicePixelRatio` æ¥æ‰“å° `dpr` ã€‚

### 1px è¾¹æ¡†é—®é¢˜

å‰ç«¯å·¥ç¨‹å¸ˆç°åœ¨å¿…é¡»ç›´é¢å¦‚ä¸‹äº‹å®ï¼š

1. ä½ æƒ³ç”»ä¸€ä¸ª `1px` çš„ä¸‹è¾¹æ¡†ï¼Œä½†æ˜¯å±å¹•å´å±•ç¤ºäº†ä¸€æ¡ `2-3` ç‰©ç†åƒç´ çš„çº¿
2. ä½ æ— æ³•åƒ `ios` å’Œå®‰å“ä¸€æ ·ç›´æ¥æ“çºµç‰©ç†åƒç´ ç‚¹

`1px` é—®é¢˜æœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œå¦‚ï¼š

- border-image å›¾ç‰‡
- background-image æ¸å˜
- box-shadow ç­‰
- ä¼ªå…ƒç´  + transform å¯¹è¾¹æ¡†è¿›è¡Œç¼©æ”¾

ä½†ç›®å‰æœ€æ¨å´‡çš„è¿˜æ˜¯åˆ©ç”¨ `CSS3` çš„ `transform: scale` ï¼Œå› ä¸ºå…¶ç®€å•æ˜“ç”¨ä¸”å…¼å®¹æ€§å¥½ã€‚

å±å¹•æ˜¾ç¤ºäº†ä¸¤ä¸ªç‰©ç†åƒç´ ç‚¹ï¼Œé‚£å°±å¯ä»¥è®¾ç½® `scale(0.5)` ï¼›ä¸‰ä¸ªåƒç´ ç‚¹åˆ™è®¾ç½® `0.33`

å¯ä»¥åˆ©ç”¨ `CSS` çš„ `-webkit-min-device-pixel-ratio` åª’ä½“æŸ¥è¯¢é’ˆå¯¹ä¸åŒçš„ `dpr` åšå‡ºå¤„ç†ï¼Œä»¥ä¸‹ä»¥ `less` ä»£ç ä¸ºä¾‹ï¼š

```
@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {
  .border-bt-1px(@color) {
    postion: relative;
    &::after {
        position: absolute;
      bottom: 0;
      width: 100%;
      height: 1px;
      background-color: @color;
      transform: scaleY(0.5);
    }
  }
}
```

## rpx çš„åŸç†æ˜¯ä»€ä¹ˆ

rpx æ˜¯å¾®ä¿¡å°ç¨‹åºè§£å†³è‡ªé€‚åº”å±å¹•å°ºå¯¸çš„å°ºå¯¸å•ä½ã€‚å¾®ä¿¡å°ç¨‹åºè§„å®šå±å¹•çš„å®½åº¦ä¸º 750rpxã€‚

æ— è®ºæ˜¯åœ¨ iPhone6 ä¸Šé¢è¿˜æ˜¯å…¶ä»–æœºå‹ä¸Šé¢éƒ½æ˜¯ 750rpx çš„å±å¹•å®½åº¦ï¼Œæ‹¿ iPhone6 æ¥è®²ï¼Œå±å¹•å®½åº¦ä¸º 375pxï¼ŒæŠŠå®ƒåˆ†ä¸º 750rpx åï¼Œ 1rpx = 0.5pxã€‚

å¾®ä¿¡å°ç¨‹åºåŒæ—¶ä¹Ÿæ”¯æŒ rem å°ºå¯¸å•ä½ï¼Œ rem è§„å®šå±å¹•çš„å®½åº¦ä¸º 20rem, æ‰€ä»¥ 1rem = (750/20)rpx = 37.5 rpx

## å¦‚ä½•å®ç° 0.5px

### scale ï¼ˆæ¨èï¼Œä½†åªé€‚ç”¨åœ¨ä»¥ px ä¸ºå•ä½çš„æ—¶å€™ï¼‰

```css
// é€šè¿‡ä¼ªå…ƒç´ å®ç° 0.5px border
.border::after {
  content: "";
  box-sizing: border-box;
  /* // ä¸ºäº†ä¸åŸå…ƒç´ ç­‰å¤§ */
  position: absolute;
  left: 0;
  top: 0;
  width: 200%;
  height: 200%;
  border: 1px solid gray;
  transform: scale(0.5);
  transform-origin: 0 0;
}

// é€šè¿‡ä¼ªå…ƒç´ å®ç° 0.5px ç»†çº¿
.line::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 200%;
  height: 1px;
  background: #b3b4b8;
  transform: scale(0.5);
  transform-origin: 0 0;
}

// è¿›è¡Œ dpr é€‚é…å¯ä»¥è¿™æ ·å†™
@media (-webkit-min-device-pixel-ratio: 2) {
  .line::after {
    /* ... */
    height: 1px;
    transform: scale(0.5);
    transform-origin: 0 0;
  }
}

@media (-webkit-min-device-pixel-ratio: 3) {
  .line::after {
    /* ... */
    height: 1px;
    transform: scale(0.333);
    transform-origin: 0 0;
  }
}
```

> å…¶ä»–è¯¦æƒ…çœ‹ï¼šhttps://jelly.jd.com/article/5f5a4b31da524a0147e97da0

## å‚è€ƒæ–‡ç« 

- [æŒæ¡ web å¼€å‘åŸºç¡€ç³»åˆ—--ç‰©ç†åƒç´ ã€é€»è¾‘åƒç´ ã€css åƒç´ ](https://juejin.cn/post/6844903839452102670)
- [è®¾å¤‡(ç‰©ç†)åƒç´  vs é€»è¾‘åƒç´ ï¼ˆcss è™šæ‹Ÿåƒç´ ï¼‰ä¸ dpr ä¸ rem](https://juejin.cn/post/6934216470968664077)
- [ç§»åŠ¨ web å¿…ä¼šæŠ€èƒ½--å±å¹•é€‚é…ï¼ˆç‰©ç†åƒç´  CSS åƒç´ ï¼‰](https://juejin.cn/post/6844904097309687822)
- [pxã€emã€remã€rpx ç”¨æ³• ä¸ åŒºåˆ«](https://blog.csdn.net/function__/article/details/84950897)
