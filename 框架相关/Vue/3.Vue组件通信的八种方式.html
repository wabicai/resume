<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wabicai的个人空间</title>
    <meta name="generator" content="VuePress 1.9.9">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <meta name="description" content="前端、后端、互联网前沿学习等等">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.3cd18c78.js" as="script"><link rel="preload" href="/assets/js/2.c01b3cf8.js" as="script"><link rel="preload" href="/assets/js/155.6ef5ab79.js" as="script"><link rel="prefetch" href="/assets/js/10.aee50063.js"><link rel="prefetch" href="/assets/js/100.86c754c1.js"><link rel="prefetch" href="/assets/js/101.a39e7c4a.js"><link rel="prefetch" href="/assets/js/102.39e129d8.js"><link rel="prefetch" href="/assets/js/103.323acc08.js"><link rel="prefetch" href="/assets/js/104.088cd3a6.js"><link rel="prefetch" href="/assets/js/105.e776874b.js"><link rel="prefetch" href="/assets/js/106.b7e090aa.js"><link rel="prefetch" href="/assets/js/107.79dd377f.js"><link rel="prefetch" href="/assets/js/108.e9a6d00a.js"><link rel="prefetch" href="/assets/js/109.7590a459.js"><link rel="prefetch" href="/assets/js/11.18f3c5d8.js"><link rel="prefetch" href="/assets/js/110.2a518e41.js"><link rel="prefetch" href="/assets/js/111.d2c13528.js"><link rel="prefetch" href="/assets/js/112.6feb2a18.js"><link rel="prefetch" href="/assets/js/113.c29abcb5.js"><link rel="prefetch" href="/assets/js/114.21f70e69.js"><link rel="prefetch" href="/assets/js/115.ed4d71e0.js"><link rel="prefetch" href="/assets/js/116.7d81b47b.js"><link rel="prefetch" href="/assets/js/117.9d3119b0.js"><link rel="prefetch" href="/assets/js/118.835c0588.js"><link rel="prefetch" href="/assets/js/119.2b6d6eca.js"><link rel="prefetch" href="/assets/js/12.cc9823d3.js"><link rel="prefetch" href="/assets/js/120.aab799ce.js"><link rel="prefetch" href="/assets/js/121.1433bbbc.js"><link rel="prefetch" href="/assets/js/122.c2cc49f6.js"><link rel="prefetch" href="/assets/js/123.e5b342c3.js"><link rel="prefetch" href="/assets/js/124.1fc1907e.js"><link rel="prefetch" href="/assets/js/125.55abf446.js"><link rel="prefetch" href="/assets/js/126.6e43d891.js"><link rel="prefetch" href="/assets/js/127.57029f26.js"><link rel="prefetch" href="/assets/js/128.c4b0ed3c.js"><link rel="prefetch" href="/assets/js/129.c0443bcd.js"><link rel="prefetch" href="/assets/js/13.270d0f95.js"><link rel="prefetch" href="/assets/js/130.ae9afc14.js"><link rel="prefetch" href="/assets/js/131.6459bb78.js"><link rel="prefetch" href="/assets/js/132.867b257b.js"><link rel="prefetch" href="/assets/js/133.77f15d7c.js"><link rel="prefetch" href="/assets/js/134.71c04ebf.js"><link rel="prefetch" href="/assets/js/135.219cbf3e.js"><link rel="prefetch" href="/assets/js/136.ceeb8a80.js"><link rel="prefetch" href="/assets/js/137.5a79037c.js"><link rel="prefetch" href="/assets/js/138.35932692.js"><link rel="prefetch" href="/assets/js/139.20328eac.js"><link rel="prefetch" href="/assets/js/14.b22133ab.js"><link rel="prefetch" href="/assets/js/140.553ff5b0.js"><link rel="prefetch" href="/assets/js/141.1e6a96f3.js"><link rel="prefetch" href="/assets/js/142.bc627569.js"><link rel="prefetch" href="/assets/js/143.f0e06384.js"><link rel="prefetch" href="/assets/js/144.5d7ebf2b.js"><link rel="prefetch" href="/assets/js/145.ff97ba83.js"><link rel="prefetch" href="/assets/js/146.71eafdfe.js"><link rel="prefetch" href="/assets/js/147.da611df1.js"><link rel="prefetch" href="/assets/js/148.2e834f73.js"><link rel="prefetch" href="/assets/js/149.5581ef60.js"><link rel="prefetch" href="/assets/js/15.3c80b963.js"><link rel="prefetch" href="/assets/js/150.122fa39b.js"><link rel="prefetch" href="/assets/js/151.6f3806f4.js"><link rel="prefetch" href="/assets/js/152.4c60df1d.js"><link rel="prefetch" href="/assets/js/153.95fbddf0.js"><link rel="prefetch" href="/assets/js/154.6fc58e2e.js"><link rel="prefetch" href="/assets/js/156.15db2ee7.js"><link rel="prefetch" href="/assets/js/157.a89f4df0.js"><link rel="prefetch" href="/assets/js/158.2344876d.js"><link rel="prefetch" href="/assets/js/159.f5339e22.js"><link rel="prefetch" href="/assets/js/16.ccb52a9f.js"><link rel="prefetch" href="/assets/js/160.e123e70c.js"><link rel="prefetch" href="/assets/js/161.6176bb03.js"><link rel="prefetch" href="/assets/js/162.4f0ca986.js"><link rel="prefetch" href="/assets/js/163.eb4ff119.js"><link rel="prefetch" href="/assets/js/164.6ee75976.js"><link rel="prefetch" href="/assets/js/165.606cff60.js"><link rel="prefetch" href="/assets/js/166.cd554076.js"><link rel="prefetch" href="/assets/js/167.863a511c.js"><link rel="prefetch" href="/assets/js/168.8a8a0f0e.js"><link rel="prefetch" href="/assets/js/169.3653819c.js"><link rel="prefetch" href="/assets/js/17.0f3abc51.js"><link rel="prefetch" href="/assets/js/170.7f192ac0.js"><link rel="prefetch" href="/assets/js/171.ba676be0.js"><link rel="prefetch" href="/assets/js/172.e88d7b4f.js"><link rel="prefetch" href="/assets/js/173.b8a45e8a.js"><link rel="prefetch" href="/assets/js/174.5a25dcb7.js"><link rel="prefetch" href="/assets/js/175.b57ca385.js"><link rel="prefetch" href="/assets/js/176.620d9eb7.js"><link rel="prefetch" href="/assets/js/177.e5274e1a.js"><link rel="prefetch" href="/assets/js/178.2477c888.js"><link rel="prefetch" href="/assets/js/179.a3da0b27.js"><link rel="prefetch" href="/assets/js/18.c74099e4.js"><link rel="prefetch" href="/assets/js/180.1fccbc04.js"><link rel="prefetch" href="/assets/js/181.5c5bc686.js"><link rel="prefetch" href="/assets/js/182.0bfa2b46.js"><link rel="prefetch" href="/assets/js/183.3540e8a2.js"><link rel="prefetch" href="/assets/js/184.e090c6d0.js"><link rel="prefetch" href="/assets/js/185.de31e7ad.js"><link rel="prefetch" href="/assets/js/186.ac9e5712.js"><link rel="prefetch" href="/assets/js/187.50643f77.js"><link rel="prefetch" href="/assets/js/188.f2c1c601.js"><link rel="prefetch" href="/assets/js/189.bf531838.js"><link rel="prefetch" href="/assets/js/19.596ed989.js"><link rel="prefetch" href="/assets/js/190.9db0aba4.js"><link rel="prefetch" href="/assets/js/191.a1a1ae55.js"><link rel="prefetch" href="/assets/js/192.50bbc086.js"><link rel="prefetch" href="/assets/js/193.f665815d.js"><link rel="prefetch" href="/assets/js/194.623e86c4.js"><link rel="prefetch" href="/assets/js/195.d8ca5c4d.js"><link rel="prefetch" href="/assets/js/196.62cc4618.js"><link rel="prefetch" href="/assets/js/197.8d80f65c.js"><link rel="prefetch" href="/assets/js/20.1a51f404.js"><link rel="prefetch" href="/assets/js/21.fcd6aaa9.js"><link rel="prefetch" href="/assets/js/22.d0226a61.js"><link rel="prefetch" href="/assets/js/23.f9e9dfb1.js"><link rel="prefetch" href="/assets/js/24.a0b405ea.js"><link rel="prefetch" href="/assets/js/25.0fbbde56.js"><link rel="prefetch" href="/assets/js/26.9a631f9f.js"><link rel="prefetch" href="/assets/js/27.fcbb0af3.js"><link rel="prefetch" href="/assets/js/28.594abc90.js"><link rel="prefetch" href="/assets/js/29.5be03aa4.js"><link rel="prefetch" href="/assets/js/3.82ac21a6.js"><link rel="prefetch" href="/assets/js/30.144fe532.js"><link rel="prefetch" href="/assets/js/31.db068608.js"><link rel="prefetch" href="/assets/js/32.8f595803.js"><link rel="prefetch" href="/assets/js/33.adb00517.js"><link rel="prefetch" href="/assets/js/34.e98063a1.js"><link rel="prefetch" href="/assets/js/35.2d6f8520.js"><link rel="prefetch" href="/assets/js/36.a6f06a10.js"><link rel="prefetch" href="/assets/js/37.2cac395d.js"><link rel="prefetch" href="/assets/js/38.40175614.js"><link rel="prefetch" href="/assets/js/39.2bec3c30.js"><link rel="prefetch" href="/assets/js/4.43690b61.js"><link rel="prefetch" href="/assets/js/40.56a5f511.js"><link rel="prefetch" href="/assets/js/41.5d96bd79.js"><link rel="prefetch" href="/assets/js/42.18bc8c46.js"><link rel="prefetch" href="/assets/js/43.c442f08d.js"><link rel="prefetch" href="/assets/js/44.2a7cc5e5.js"><link rel="prefetch" href="/assets/js/45.1ef7d150.js"><link rel="prefetch" href="/assets/js/46.db123112.js"><link rel="prefetch" href="/assets/js/47.17ff8729.js"><link rel="prefetch" href="/assets/js/48.45cb9be7.js"><link rel="prefetch" href="/assets/js/49.3557a61f.js"><link rel="prefetch" href="/assets/js/5.7c13b7b3.js"><link rel="prefetch" href="/assets/js/50.7a44000f.js"><link rel="prefetch" href="/assets/js/51.f5f5d5f7.js"><link rel="prefetch" href="/assets/js/52.37e35a16.js"><link rel="prefetch" href="/assets/js/53.822ef5da.js"><link rel="prefetch" href="/assets/js/54.36db3aee.js"><link rel="prefetch" href="/assets/js/55.e0474b32.js"><link rel="prefetch" href="/assets/js/56.07398bf4.js"><link rel="prefetch" href="/assets/js/57.26dcb5a5.js"><link rel="prefetch" href="/assets/js/58.4ac274c6.js"><link rel="prefetch" href="/assets/js/59.c15216f9.js"><link rel="prefetch" href="/assets/js/6.cef30f1c.js"><link rel="prefetch" href="/assets/js/60.acea1d6f.js"><link rel="prefetch" href="/assets/js/61.3a4d59ac.js"><link rel="prefetch" href="/assets/js/62.5fe9a979.js"><link rel="prefetch" href="/assets/js/63.5ab91581.js"><link rel="prefetch" href="/assets/js/64.5404759b.js"><link rel="prefetch" href="/assets/js/65.b4d702e7.js"><link rel="prefetch" href="/assets/js/66.22ec626b.js"><link rel="prefetch" href="/assets/js/67.0b1bd25e.js"><link rel="prefetch" href="/assets/js/68.82b15680.js"><link rel="prefetch" href="/assets/js/69.fae12b0c.js"><link rel="prefetch" href="/assets/js/7.250c0c54.js"><link rel="prefetch" href="/assets/js/70.f07d608d.js"><link rel="prefetch" href="/assets/js/71.a0ccfaf6.js"><link rel="prefetch" href="/assets/js/72.641eaa89.js"><link rel="prefetch" href="/assets/js/73.92224599.js"><link rel="prefetch" href="/assets/js/74.6e3b1a4b.js"><link rel="prefetch" href="/assets/js/75.e7310a05.js"><link rel="prefetch" href="/assets/js/76.472716d3.js"><link rel="prefetch" href="/assets/js/77.9c5ff55b.js"><link rel="prefetch" href="/assets/js/78.80d86dd2.js"><link rel="prefetch" href="/assets/js/79.ed619ee8.js"><link rel="prefetch" href="/assets/js/8.ff4b36aa.js"><link rel="prefetch" href="/assets/js/80.4d1c835d.js"><link rel="prefetch" href="/assets/js/81.1583a039.js"><link rel="prefetch" href="/assets/js/82.a642d9f0.js"><link rel="prefetch" href="/assets/js/83.7c1f1068.js"><link rel="prefetch" href="/assets/js/84.572dc185.js"><link rel="prefetch" href="/assets/js/85.941fb221.js"><link rel="prefetch" href="/assets/js/86.d5aeded7.js"><link rel="prefetch" href="/assets/js/87.f383b8f5.js"><link rel="prefetch" href="/assets/js/88.a55bb149.js"><link rel="prefetch" href="/assets/js/89.f7b150e5.js"><link rel="prefetch" href="/assets/js/9.7142478d.js"><link rel="prefetch" href="/assets/js/90.56e13fe1.js"><link rel="prefetch" href="/assets/js/91.b6da24a8.js"><link rel="prefetch" href="/assets/js/92.ff16c0b3.js"><link rel="prefetch" href="/assets/js/93.33a9fda8.js"><link rel="prefetch" href="/assets/js/94.e5652917.js"><link rel="prefetch" href="/assets/js/95.e12af682.js"><link rel="prefetch" href="/assets/js/96.ec72b003.js"><link rel="prefetch" href="/assets/js/97.7ae9a687.js"><link rel="prefetch" href="/assets/js/98.133dfc4e.js"><link rel="prefetch" href="/assets/js/99.61445ec1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wabicai的个人空间</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow down"></span></button> <button type="button" aria-label="Golang" class="mobile-dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Golang/" class="nav-link">
  Golang
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML、CSS" class="dropdown-title"><span class="title">HTML、CSS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTML、CSS" class="mobile-dropdown-title"><span class="title">HTML、CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML、CSS/" class="nav-link">
  HTML、CSS
</a></li><li class="dropdown-item"><!----> <a href="/HTML、CSS/移动端/" class="nav-link">
  移动端
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/基础知识/" class="nav-link">
  基础知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/基础知识/操作系统与数据库/" class="nav-link">
  操作系统与数据库
</a></li><li class="dropdown-item"><!----> <a href="/基础知识/浏览器相关/" class="nav-link">
  浏览器相关
</a></li><li class="dropdown-item"><!----> <a href="/基础知识/计算机网络/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/基础知识/设计模式/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作经验记录" class="dropdown-title"><span class="title">工作经验记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="工作经验记录" class="mobile-dropdown-title"><span class="title">工作经验记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/2、Base模块/" class="nav-link">
  2、Base模块
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/3、Module模块/" class="nav-link">
  3、Module模块
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/3、Module模块/business/" class="nav-link">
  Business
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/" class="nav-link">
  SDK
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/3、Module模块/statistics/" class="nav-link">
  Statistics
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/多媒体实现/" class="nav-link">
  多媒体实现
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/小程序插件/" class="nav-link">
  小程序插件
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/Sketch/文件加载/" class="nav-link">
  文件加载
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/Sketch/方案设计/" class="nav-link">
  方案设计
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/远程调试/" class="nav-link">
  远程调试
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/" class="nav-link">
  项目总结
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/项目方案设计/" class="nav-link">
  项目方案设计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架相关" class="dropdown-title"><span class="title">框架相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架相关" class="mobile-dropdown-title"><span class="title">框架相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架相关/Vue/Api原理/" class="nav-link">
  Api原理
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/" class="nav-link">
  Self Vue Master
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/v1/" class="nav-link">
  V1
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/v2/" class="nav-link">
  V2
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/v3/" class="nav-link">
  V3
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/小程序/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/" class="nav-link">
  框架相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试记录" class="dropdown-title"><span class="title">面试记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试记录" class="mobile-dropdown-title"><span class="title">面试记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/面试记录/前端手写Api相关/self-promise/" class="nav-link">
  Self Promise
</a></li><li class="dropdown-item"><!----> <a href="/面试记录/前端手写Api相关/" class="nav-link">
  前端手写Api相关
</a></li><li class="dropdown-item"><!----> <a href="/面试记录/" class="nav-link">
  面试记录
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><span class="title">Golang</span> <span class="arrow down"></span></button> <button type="button" aria-label="Golang" class="mobile-dropdown-title"><span class="title">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Golang/" class="nav-link">
  Golang
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML、CSS" class="dropdown-title"><span class="title">HTML、CSS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTML、CSS" class="mobile-dropdown-title"><span class="title">HTML、CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML、CSS/" class="nav-link">
  HTML、CSS
</a></li><li class="dropdown-item"><!----> <a href="/HTML、CSS/移动端/" class="nav-link">
  移动端
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link">
  Java Script
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/基础知识/" class="nav-link">
  基础知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/基础知识/操作系统与数据库/" class="nav-link">
  操作系统与数据库
</a></li><li class="dropdown-item"><!----> <a href="/基础知识/浏览器相关/" class="nav-link">
  浏览器相关
</a></li><li class="dropdown-item"><!----> <a href="/基础知识/计算机网络/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/基础知识/设计模式/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作经验记录" class="dropdown-title"><span class="title">工作经验记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="工作经验记录" class="mobile-dropdown-title"><span class="title">工作经验记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/2、Base模块/" class="nav-link">
  2、Base模块
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/3、Module模块/" class="nav-link">
  3、Module模块
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/3、Module模块/business/" class="nav-link">
  Business
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/" class="nav-link">
  SDK
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/SDK/3、Module模块/statistics/" class="nav-link">
  Statistics
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/前端工程化/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/TRTC/多媒体实现/" class="nav-link">
  多媒体实现
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/小程序插件/" class="nav-link">
  小程序插件
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/Sketch/文件加载/" class="nav-link">
  文件加载
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/Sketch/方案设计/" class="nav-link">
  方案设计
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/Tencent/远程调试/" class="nav-link">
  远程调试
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/" class="nav-link">
  项目总结
</a></li><li class="dropdown-item"><!----> <a href="/工作经验记录/项目总结/项目方案设计/" class="nav-link">
  项目方案设计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架相关" class="dropdown-title"><span class="title">框架相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架相关" class="mobile-dropdown-title"><span class="title">框架相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/框架相关/Vue/Api原理/" class="nav-link">
  Api原理
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/" class="nav-link">
  Self Vue Master
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/v1/" class="nav-link">
  V1
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/v2/" class="nav-link">
  V2
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/self-vue-master/v3/" class="nav-link">
  V3
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/小程序/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/框架相关/" class="nav-link">
  框架相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试记录" class="dropdown-title"><span class="title">面试记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试记录" class="mobile-dropdown-title"><span class="title">面试记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/面试记录/前端手写Api相关/self-promise/" class="nav-link">
  Self Promise
</a></li><li class="dropdown-item"><!----> <a href="/面试记录/前端手写Api相关/" class="nav-link">
  前端手写Api相关
</a></li><li class="dropdown-item"><!----> <a href="/面试记录/" class="nav-link">
  面试记录
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架相关/Vue/1.生命周期，钩子函数.html" class="sidebar-link">/框架相关/Vue/1.生命周期，钩子函数.html</a></li><li><a href="/框架相关/Vue/11.Vue细节.html" class="sidebar-link">key 的使用</a></li><li><a href="/框架相关/Vue/12.路由传参、跳转.html" class="sidebar-link">/框架相关/Vue/12.路由传参、跳转.html</a></li><li><a href="/框架相关/Vue/13.Vue2 vs Vue3.html" class="sidebar-link">关于 Vue3 的 setup</a></li><li><a href="/框架相关/Vue/2.虚拟DOM，Diff算法.html" class="sidebar-link">/框架相关/Vue/2.虚拟DOM，Diff算法.html</a></li><li><a href="/框架相关/Vue/3.Vue组件通信的八种方式.html" class="active sidebar-link">/框架相关/Vue/3.Vue组件通信的八种方式.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/框架相关/Vue/3.Vue组件通信的八种方式.html#_1-父组件向子组件传值-props" class="sidebar-link">1. 父组件向子组件传值（props）</a></li><li class="sidebar-sub-header"><a href="/框架相关/Vue/3.Vue组件通信的八种方式.html#_2-子组件向父组件传值-通过事件形式-this-emit" class="sidebar-link">2. 子组件向父组件传值（通过事件形式  this.$emit）</a></li></ul></li><li><a href="/框架相关/Vue/4.组件状态管理VueX.html" class="sidebar-link">/框架相关/Vue/4.组件状态管理VueX.html</a></li><li><a href="/框架相关/Vue/5.Api用法记录.html" class="sidebar-link">/框架相关/Vue/5.Api用法记录.html</a></li><li><a href="/框架相关/Vue/6.组件插槽.html" class="sidebar-link">匿名插槽</a></li><li><a href="/框架相关/Vue/7.响应式原理.html" class="sidebar-link">要点：</a></li><li><a href="/框架相关/Vue/8.Vue2中的缺陷.html" class="sidebar-link">/框架相关/Vue/8.Vue2中的缺陷.html</a></li><li><a href="/框架相关/Vue/9.路由懒加载、异步加载组件、动态组件.html" class="sidebar-link">异步加载组件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>选自：<a href="https://segmentfault.com/a/1190000019208626" target="_blank" rel="noopener noreferrer">vue组件间通信六种方式（完整版）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="方法一、props-emit-必掌握"><a href="#方法一、props-emit-必掌握" class="header-anchor">#</a> 方法一、props/$emit（必掌握）</h1> <p>父组件A通过props的方式向子组件B传递，B to A 通过在 B 组件中 $emit, A 组件中 v-on 的方式实现</p> <h2 id="_1-父组件向子组件传值-props"><a href="#_1-父组件向子组件传值-props" class="header-anchor">#</a> 1. 父组件向子组件传值（props）</h2> <p>这是最最常用的父子组件通信方式，父组件向子组件传递数据是通过prop传递的，子组件传递数据给父组件是通过$emit触发事件来做到的</p> <blockquote><p>方法：
父组件 =&gt; 定义传参名字和数据 v-bind:name = 'parameter'
子组件 =&gt; props中接收</p> <p>接下来我们通过一个例子，说明父组件如何向子组件传递值：在子组件Users.vue中如何获取父组件App.vue中的数据 <code>users:[&quot;Henry&quot;,&quot;Bucky&quot;,&quot;Emily&quot;]</code></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//App.vue父组件</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div id <span class="token operator">=</span> <span class="token string">&quot;app&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    users v <span class="token operator">-</span> bind<span class="token operator">:</span> users <span class="token operator">=</span> <span class="token string">&quot;users&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>users<span class="token operator">&gt;</span>
    <span class="token comment">// v-bind:name = 'parameter'</span>
    <span class="token comment">//1. 前者自定义名称便于子组件调用，后者要传递数据名</span>
    <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">import</span> Users <span class="token keyword">from</span> <span class="token string">&quot;./components/Users&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">users</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Henry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bucky&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Emily&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;users&quot;</span><span class="token operator">:</span> Users
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//users子组件</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    ul <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    li v <span class="token operator">-</span>
    <span class="token keyword">for</span> <span class="token operator">=</span> <span class="token string">&quot;user in users&quot;</span> <span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            user
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token comment">//3. 遍历传递过来的值，然后呈现到页面</span>
    <span class="token operator">&lt;</span>
    <span class="token operator">/</span>ul<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">users</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//2. 这个就是父组件中子标签自定义名字</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
                <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>总结：父组件通过props向下传递数据给子组件。注：组件中的数据共有三种形式：data、props、computed</strong></p> <h2 id="_2-子组件向父组件传值-通过事件形式-this-emit"><a href="#_2-子组件向父组件传值-通过事件形式-this-emit" class="header-anchor">#</a> 2. 子组件向父组件传值（通过事件形式  this.$emit）</h2> <p>接下来我们通过一个例子，说明子组件如何向父组件传递值：当我们点击“Vue.js Demo”后，子组件向父组件传递值，文字由原来的“传递的是一个值”变成“子向父组件传值”，实现子组件向父组件值的传递。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 子组件 =&gt;  函数中触发 this.$emit(&quot;titleChanged&quot;,&quot;子向父组件传值&quot;);</span>
<span class="token comment">//                         自定义事件  传递值“子向父组件传值”</span>
<span class="token comment">// 父组件 =&gt;  v-on:titleChanged = 'changeTitle'</span>
<span class="token comment">//     触发子组件传过来的自定义事件     触发函数</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    header <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    h1 @click <span class="token operator">=</span> <span class="token string">&quot;changeTitle&quot;</span> <span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            title
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token operator">/</span> <span class="token operator">/</span> 绑定一个点击事件 <span class="token operator">&lt;</span>
    <span class="token operator">/</span>header<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'app-header'</span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Vue.js Demo&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">changeTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;titleChanged&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;子向父组件传值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//自定义事件  传递值“子向父组件传值”</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 父组件</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div id <span class="token operator">=</span> <span class="token string">&quot;app&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    app <span class="token operator">-</span> header v <span class="token operator">-</span> on<span class="token operator">:</span> titleChanged <span class="token operator">=</span> <span class="token string">&quot;updateTitle&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>app<span class="token operator">-</span>header<span class="token operator">&gt;</span>
    <span class="token comment">//与子组件titleChanged自定义事件保持一致</span>
    <span class="token comment">// updateTitle($event)接受传递过来的文字</span>
    <span class="token operator">&lt;</span>
    h2 <span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            title
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&quot;./components/Header&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;传递的是一个值&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">updateTitle</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//声明这个函数</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;app-header&quot;</span><span class="token operator">:</span> Header<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>总结：子组件通过events给父组件发送消息，实际上就是子组件把自己的数据发送到父组件。</strong></p> <h1 id="方法二、-emit-on-中央事件总线"><a href="#方法二、-emit-on-中央事件总线" class="header-anchor">#</a> 方法二、 <code>$emit</code> / <code>$on</code> （中央事件总线）</h1> <p>这种方法通过一个空的Vue实例作为中央事件总线（事件中心），<strong>用它来触发事件和监听事件, 巧妙而轻量地实现了任何组件间的通信，包括父子、兄弟、跨级</strong>。当我们的项目比较大时，可以选择更好的状态管理解决方案vuex。</p> <p>如果两个组件不是父子关系呢? 也就是兄弟组件如何通信?</p> <p>这种情况下可以使用中央事件总线的方式。新建一个Vue事件bus对象，然后通过bus.on监听触发的事件。</p> <p><img src="https://img-blog.csdnimg.cn/20210311111944340.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FidWFuZGVu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <ol><li><strong>具体实现方式：</strong></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">var</span> Event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span>事件名<span class="token punctuation">,</span> 数据<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span>事件名<span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>举个例子
假设兄弟组件有三个，分别是A、B、C组件，C组件如何获取A或者B组件的数据</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span> div id <span class="token operator">=</span> <span class="token string">&quot;itany&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    my <span class="token operator">-</span> a <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>my<span class="token operator">-</span>a<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    my <span class="token operator">-</span> b <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>my<span class="token operator">-</span>b<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    my <span class="token operator">-</span> c <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>my<span class="token operator">-</span>c<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    template id <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    h3 <span class="token operator">&gt;</span> <span class="token constant">A</span>组件： <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            name
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>h3<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    button @click <span class="token operator">=</span> <span class="token string">&quot;send&quot;</span> <span class="token operator">&gt;</span> 将数据发送给<span class="token constant">C</span>组件 <span class="token operator">&lt;</span> <span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    template id <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    h3 <span class="token operator">&gt;</span> <span class="token constant">B</span>组件： <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            age
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>h3<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    button @click <span class="token operator">=</span> <span class="token string">&quot;send&quot;</span> <span class="token operator">&gt;</span> 将数组发送给<span class="token constant">C</span>组件 <span class="token operator">&lt;</span> <span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    template id <span class="token operator">=</span> <span class="token string">&quot;c&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    h3 <span class="token operator">&gt;</span> <span class="token constant">C</span>组件： <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            name
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>， <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            age
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>h3<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">var</span> Event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//定义一个空的Vue实例</span>
<span class="token keyword">var</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'#a'</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'data-a'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'#b'</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'data-b'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'#c'</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//在模板编译完成后执行</span>
        Event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'data-a'</span><span class="token punctuation">,</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">//箭头函数内部不会产生新的this，这边如果不用=&gt;,this指代Event</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        Event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'data-b'</span><span class="token punctuation">,</span> <span class="token parameter">age</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#itany'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'my-a'</span><span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span>
        <span class="token string-property property">'my-b'</span><span class="token operator">:</span> <span class="token constant">B</span><span class="token punctuation">,</span>
        <span class="token string-property property">'my-c'</span><span class="token operator">:</span> <span class="token constant">C</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br></div></div><p><code>$on</code> 监听了自定义事件 data-a和data-b，因为有时不确定何时会触发事件，一般会在 <code>mounted 或 created 钩子中来监听</code> 。</p> <h1 id="方法三、-attrs-listeners-进阶掌握"><a href="#方法三、-attrs-listeners-进阶掌握" class="header-anchor">#</a> 方法三、 <code>$attrs</code> / <code>$listeners</code> （进阶掌握）</h1> <ol><li><strong>简介</strong>
多级组件嵌套需要传递数据时，通常使用的方法是通过vuex。但如果仅仅是传递数据，而不做中间处理，使用 vuex 处理，未免有点大材小用。为此Vue2.4 版本提供了另一种方法---- <code>$attrs/$listeners</code></li></ol> <p>listeners的作用：<strong>解决多层嵌套情况下，父组件A下面有子组件B，组件B下面有组件C，组件A传递数据给组件B的问题</strong></p> <p><code>$attrs</code> ：包含了父作用域中不被 prop 所识别 (且获取) 的特性绑定 (class 和 style 除外)。当一个组件没有声明任何 prop 时，这里会包含所有父作用域的绑定 (class 和 style 除外)，并且可以通过 v-bind=&quot;$attrs&quot; 传入内部组件。通常配合 interitAttrs 选项一起使用。</p> <p><code>$listeners</code> ：包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器。它可以通过 v-on=&quot;$listeners&quot; 传入内部组件</p> <p>接下来我们看个跨级通信的例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// index.vue</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    h2 <span class="token operator">&gt;</span> 浪里行舟 <span class="token operator">&lt;</span> <span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    child <span class="token operator">-</span> com1<span class="token operator">:</span> foo <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token operator">:</span> boo <span class="token operator">=</span> <span class="token string">&quot;boo&quot;</span><span class="token operator">:</span> coo <span class="token operator">=</span> <span class="token string">&quot;coo&quot;</span><span class="token operator">:</span> doo <span class="token operator">=</span> <span class="token string">&quot;doo&quot;</span>
title <span class="token operator">=</span> <span class="token string">&quot;前端工匠&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span> <span class="token operator">/</span>child<span class="token operator">-</span>com1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">childCom1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./childCom1.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        childCom1
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&quot;Javascript&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">boo</span><span class="token operator">:</span> <span class="token string">&quot;Html&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">coo</span><span class="token operator">:</span> <span class="token string">&quot;CSS&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">doo</span><span class="token operator">:</span> <span class="token string">&quot;Vue&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// childCom1.vue</span>
<span class="token operator">&lt;</span>
template <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    p <span class="token operator">&gt;</span> foo<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            foo
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    p <span class="token operator">&gt;</span> childCom1的$attrs<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            $attrs
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    child <span class="token operator">-</span> com2 v <span class="token operator">-</span> bind <span class="token operator">=</span> <span class="token string">&quot;$attrs&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>child<span class="token operator">-</span>com2<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">childCom2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./childCom2.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        childCom2
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 可以关闭自动挂载到组件根元素上的没有在props声明的属性</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> String <span class="token comment">// foo作为props属性绑定</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { &quot;boo&quot;: &quot;Html&quot;, &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;前端工匠&quot; }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// childCom2.vue</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    p <span class="token operator">&gt;</span> boo<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            boo
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    p <span class="token operator">&gt;</span> childCom2<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            $attrs
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    child <span class="token operator">-</span> com3 v <span class="token operator">-</span> bind <span class="token operator">=</span> <span class="token string">&quot;$attrs&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>child<span class="token operator">-</span>com3<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">childCom3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./childCom3.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        childCom3
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">boo</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;: &quot;前端工匠&quot; }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// childCom3.vue</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    p <span class="token operator">&gt;</span> childCom3<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            $attrs
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">coo</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> String
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><img src="https://img-blog.csdnimg.cn/20210311110022314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FidWFuZGVu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p>如上图所示 <code>$attrs</code> 表示没有继承数据的对象，格式为{属性名：属性值}。Vue2.4提供了 <code>$attrs</code> , <code>$listeners</code> 来传递数据与事件，跨级组件之间的通讯变得更简单。</p> <p>简单来说： <code>$attrs与$listeners</code> 是两个对象， <code>$attrs</code> 里存放的是父组件中绑定的非 Props 属性， <code>$listeners</code> 里存放的是父组件中绑定的非原生事件。</p> <h1 id="方法四、vuex"><a href="#方法四、vuex" class="header-anchor">#</a> 方法四、vuex</h1> <p><img src="https://img-blog.csdnimg.cn/20210311105542839.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FidWFuZGVu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <ol><li><p><strong>简要介绍Vuex原理</strong>
Vuex实现了一个单向数据流，在全局拥有一个State存放数据，当组件要更改State中的数据时，必须通过Mutation进行，Mutation同时提供了订阅者模式供外部插件调用获取State数据的更新。而当所有异步操作(常见于调用后端接口异步获取更新数据)或批量的同步操作需要走Action，但Action也是无法直接修改State的，还是需要通过Mutation来修改State的数据。最后，根据State的变化，渲染到视图上。</p></li> <li><p><strong>简要介绍各模块在流程中的功能：</strong></p></li></ol> <ul><li>Vue Components：Vue组件。HTML页面上，负责接收用户操作等交互行为，执行dispatch方法触发对应action进行回应。</li> <li>dispatch：操作行为触发方法，是唯一能执行action的方法。</li> <li>actions：操作行为处理模块, 由组件中的$store.dispatch('action 名称', data1)来触发。然后由commit()来触发mutation的调用 , 间接更新 state。负责处理Vue Components接收到的所有交互行为。包含同步/异步操作，支持多个同名方法，按照注册的顺序依次触发。向后台API请求的操作就在这个模块中进行，包括触发其他action以及提交mutation的操作。该模块提供了Promise的封装，以支持action的链式触发。</li> <li>commit：状态改变提交操作方法。对mutation进行提交，是唯一能执行mutation的方法。</li> <li>mutations：状态改变操作方法，由actions中的commit('mutation 名称')来触发。是Vuex修改state的唯一推荐方法。该方法只能进行同步操作，且方法名只能全局唯一。操作之中会有一些hook暴露出来，以进行state的监控等。</li> <li>state：页面状态管理容器对象。集中存储Vue components中data对象的零散数据，全局唯一，以进行统一的状态管理。页面显示所需的数据从该对象中进行读取，利用Vue的细粒度数据响应机制来进行高效的状态更新。</li> <li>getters：state对象读取方法。图中没有单独列出该模块，应该被包含在了render中，Vue Components通过该方法读取全局state对象。</li></ul> <ol start="3"><li><strong>Vuex与localStorage</strong>
vuex 是 vue 的状态管理器，存储的数据是响应式的。但是并不会保存起来，刷新之后就回到了初始状态，具体做法应该在vuex里数据改变的时候把数据拷贝一份保存到localStorage里面，刷新之后，如果localStorage里有保存的数据，取出来再替换store里的state。</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> defaultCity <span class="token operator">=</span> <span class="token string">&quot;上海&quot;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment">// 用户关闭了本地存储功能，此时在外层加个try...catch</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>defaultCity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        defaultCity <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'defaultCity'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">city</span><span class="token operator">:</span> defaultCity
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">changeCity</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>city <span class="token operator">=</span> city
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'defaultCity'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 数据改变的时候把数据拷贝一份保存到localStorage里面</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这里需要注意的是：由于vuex里，我们保存的状态，都是数组，而localStorage只支持字符串，所以需要用JSON转换：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>subscribeList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// array -&gt; string</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;subscribeList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string -&gt; array </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="方法五、provide-inject"><a href="#方法五、provide-inject" class="header-anchor">#</a> 方法五、provide/inject</h1> <ol><li>简介</li></ol> <p>Vue2.2.0新增API, 这对选项需要一起使用，<strong>以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效</strong>。一言而蔽之：</p> <ul><li><strong>祖先组件中通过provider来提供变量，然后在子孙组件中通过inject来注入变量。</strong></li></ul> <p>provide / inject API <strong>主要解决了跨级组件间的通信问题</strong>，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。</p> <ol start="2"><li>举个例子</li></ol> <p>假设有两个组件： A.vue 和 B.vue，B 是 A 的子组件</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// A.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">provide</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'浪里行舟'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// B.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 浪里行舟</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以看到，在 A.vue 里，我们设置了一个 <strong>provide: name</strong>，值为 浪里行舟，它的作用就是将 name 这个变量提供给它的所有子组件。而在 B.vue 中，通过 inject 注入了从 A 组件中提供的 name 变量，那么在组件 B 中，就可以直接通过 <strong>this.name</strong> 访问这个变量了，它的值也是 浪里行舟。这就是 provide / inject API 最核心的用法。</p> <p>需要注意的是：<strong>provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的</strong>----vue官方文档
所以，上面 A.vue 的 name 如果改变了，B.vue 的 this.name 是不会改变的，仍然是 浪里行舟。</p> <p>3.<strong>provide与inject 怎么实现数据响应式</strong></p> <p>一般来说，有两种办法：</p> <ul><li>provide祖先组件的实例，然后在子孙组件中注入依赖，这样就可以在子孙组件中直接修改祖先组件的实例的属性，不过这种方法有个缺点就是这个实例上挂载很多没有必要的东西比如props，methods</li> <li>使用2.6最新API Vue.observable 优化响应式 provide(推荐)</li></ul> <p>我们来看个例子：孙组件D、E和F获取A组件传递过来的color值，并能实现数据响应式变化，即A组件的color变化后，组件D、E、F会跟着变（核心代码如下：）</p> <p><img src="https://img-blog.csdnimg.cn/20210311110407467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FidWFuZGVu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// A 组件 </span>
<span class="token operator">&lt;</span>
div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    h1 <span class="token operator">&gt;</span> <span class="token constant">A</span> 组件 <span class="token operator">&lt;</span> <span class="token operator">/</span>h1<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    button @click <span class="token operator">=</span> <span class="token string">&quot;() =&gt; changeColor()&quot;</span> <span class="token operator">&gt;</span> 改变color <span class="token operator">&lt;</span> <span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    ChildrenB <span class="token operator">/</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    ChildrenC <span class="token operator">/</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">...</span><span class="token operator">...</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// provide() {</span>
    <span class="token comment">//   return {</span>
    <span class="token comment">//     theme: {</span>
    <span class="token comment">//       color: this.color //这种方式绑定的数据并不是可响应的</span>
    <span class="token comment">//     } // 即A组件的color变化后，组件D、E、F不会跟着变</span>
    <span class="token comment">//   };</span>
    <span class="token comment">// },</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token keyword">this</span> <span class="token comment">//方法一：提供祖先组件的实例</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">===</span> <span class="token string">&quot;blue&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token comment">// 方法二:使用2.6最新API Vue.observable 优化响应式 provide</span>
<span class="token comment">// provide() {</span>
<span class="token comment">//   this.theme = Vue.observable({</span>
<span class="token comment">//     color: &quot;blue&quot;</span>
<span class="token comment">//   });</span>
<span class="token comment">//   return {</span>
<span class="token comment">//     theme: this.theme</span>
<span class="token comment">//   };</span>
<span class="token comment">// },</span>
<span class="token comment">// methods: {</span>
<span class="token comment">//   changeColor(color) {</span>
<span class="token comment">//     if (color) {</span>
<span class="token comment">//       this.theme.color = color;</span>
<span class="token comment">//     } else {</span>
<span class="token comment">//       this.theme.color = this.theme.color === &quot;blue&quot; ? &quot;red&quot; : &quot;blue&quot;;</span>
<span class="token comment">//     }</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// F 组件 </span>
<span class="token operator">&lt;</span>
template functional <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;border2&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    <span class="token literal-property property">h3</span><span class="token operator">:</span> style <span class="token operator">=</span> <span class="token string">&quot;{ color: injections.theme.color }&quot;</span> <span class="token operator">&gt;</span> <span class="token constant">F</span> 组件 <span class="token operator">&lt;</span> <span class="token operator">/</span>h3<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>div<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">//函数式组件取值不一样</span>
                <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>
<span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>虽说provide 和 inject 主要为高阶插件/组件库提供用例，但如果你能在业务中熟练运用，可以达到事半功倍的效果！</p> <h1 id="方法六、-parent-children-与-refs-可以直接调用子组件方法-root-访问根实例"><a href="#方法六、-parent-children-与-refs-可以直接调用子组件方法-root-访问根实例" class="header-anchor">#</a> 方法六、 <code>$parent</code> / <code>$children</code> 与 refs（可以直接调用子组件方法） $root（访问根实例）</h1> <ul><li>ref：如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例</li> <li><code>$parent / $children</code>：访问父 / 子实例</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>简介：
    <span class="token comment">//refs用法</span>
    <span class="token operator">&lt;</span>
    component <span class="token operator">-</span> a ref <span class="token operator">=</span> <span class="token string">&quot;comA&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>component<span class="token operator">-</span>a<span class="token operator">&gt;</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>comA<span class="token punctuation">;</span>
refs 是一个对象， 可以直接<span class="token punctuation">.</span>出来。 常用

children和parent都是数组， 因为下标容易改变， 所以不常用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>需要注意的是：这两种都是直接得到组件实例，使用后可以直接调用组件的方法或访问数据。我们先来看个用 ref来访问组件的例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// component-a 子组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Vue.js'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 父组件</span>
<span class="token operator">&lt;</span>
template <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>
    component <span class="token operator">-</span> a ref <span class="token operator">=</span> <span class="token string">&quot;comA&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>component<span class="token operator">-</span>a<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    script <span class="token operator">&gt;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> comA <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>comA<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>comA<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Vue.js</span>
            comA<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 弹窗</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>不过，<strong>这两种方法的弊端是，无法在跨级或兄弟间通信。</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// parent.vue</span>
<span class="token operator">&lt;</span>
component <span class="token operator">-</span> a <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>component<span class="token operator">-</span>a<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    component <span class="token operator">-</span> b <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>component<span class="token operator">-</span>b<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>
    component <span class="token operator">-</span> b <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">/</span>component<span class="token operator">-</span>b<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>我们想在 component-a 中，访问到引用它的页面中（这里就是 parent.vue）的两个 component-b 组件，那这种情况下，就得配置额外的插件或工具了，比如 Vuex 和 Bus 的解决方案。</p> <h1 id="方法八-v-model"><a href="#方法八-v-model" class="header-anchor">#</a> 方法八：v-model</h1> <p>父组件通过v-model传递值给子组件时，会自动传递一个value的prop属性，在子组件中通过this.$emit(‘input', val)自动修改v-model绑定的值</p> <h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <p>常见使用场景可以分为三类：</p> <ol><li>父子通信：
<ol><li>父向子传递数据是通过 props，</li> <li>子向父是通过 events（<code>$emit</code>）；</li> <li>通过父链 / 子链也可以通信（<code>$parent / $children</code>）；</li> <li>ref 也可以访问组件实例；</li> <li>provide / inject API；</li> <li><code>$attrs/$listeners</code></li></ol></li></ol> <p>兄弟通信：
Bus；Vuex</p> <p>跨级通信：</p> <ol><li>Bus；</li> <li>Vuex；</li> <li>provide / inject API</li> <li><code>$attrs/$listeners</code></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/框架相关/Vue/2.虚拟DOM，Diff算法.html" class="prev">
        /框架相关/Vue/2.虚拟DOM，Diff算法.html
      </a></span> <span class="next"><a href="/框架相关/Vue/4.组件状态管理VueX.html">
        /框架相关/Vue/4.组件状态管理VueX.html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3cd18c78.js" defer></script><script src="/assets/js/2.c01b3cf8.js" defer></script><script src="/assets/js/155.6ef5ab79.js" defer></script>
  </body>
</html>
