(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{282:function(t,a,s){t.exports=s.p+"assets/img/数字签名.3de9b0c8.jpg"},470:function(t,a,s){"use strict";s.r(a);var v=s(10),_=Object(v.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_18-https原理及最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_18-https原理及最佳实践"}},[t._v("#")]),t._v(" 18.HTTPS原理及最佳实践")]),t._v(" "),a("ul",[a("li",[t._v("HTTPS = HTTP + TLS(SSL)")]),t._v(" "),a("li",[t._v("TLS 是 SSL 经过组织协议之后的版本。TLS 目前包括 TLS1.2（2008 年更新）TLS1.3（2018 年更新）")]),t._v(" "),a("li",[t._v("TLS1.2 需要 2 个 rtt，TLS1.3 需要 0 个 rtt，极大的加快了速度。")])]),t._v(" "),a("h2",{attrs:{id:"http-为什么需要握手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-为什么需要握手"}},[t._v("#")]),t._v(" HTTP 为什么需要握手？")]),t._v(" "),a("ol",[a("li",[t._v("身份认证-防冒充")]),t._v(" "),a("li",[t._v("数据加密-防窃听")]),t._v(" "),a("li",[t._v("数据防篡改-防篡改")])]),t._v(" "),a("h2",{attrs:{id:"身份认证-证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#身份认证-证书"}},[t._v("#")]),t._v(" 身份认证-证书")]),t._v(" "),a("p",[a("img",{attrs:{src:s(282),alt:""}})]),t._v(" "),a("h3",{attrs:{id:"作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),a("ol",[a("li",[t._v("校验签名")]),t._v(" "),a("li",[t._v("传递公钥")])]),t._v(" "),a("h3",{attrs:{id:"非对称加密"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密"}},[t._v("#")]),t._v(" 非对称加密")]),t._v(" "),a("p",[t._v("公钥加密，私钥解密。\n客户端请求证书 =》 服务器\n服务器发送证书 =》 携带公钥 A、证书 =》 客户端\n客户端 =》 通过公钥 A 加密一个数据 a，校验证书 =》 客户端\n服务器 =》 通过私钥解密数据 a")]),t._v(" "),a("h1",{attrs:{id:"流量劫持和监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流量劫持和监控"}},[t._v("#")]),t._v(" 流量劫持和监控")]),t._v(" "),a("blockquote",[a("p",[t._v("HTTPS 是解决链路劫持的核武器！")])]),t._v(" "),a("h3",{attrs:{id:"dns-劫持-域名劫持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns-劫持-域名劫持"}},[t._v("#")]),t._v(" DNS 劫持（域名劫持）")]),t._v(" "),a("h4",{attrs:{id:"如何攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何攻击"}},[t._v("#")]),t._v(" 如何攻击")]),t._v(" "),a("ol",[a("li",[t._v("本机 DNS 劫持\n攻击者通过某些手段使用户的计算机感染上木马病毒，或者恶意软件之后，恶意修改本地 DNS 配置，比如修改本地 hosts 文件，缓存等")]),t._v(" "),a("li",[t._v("路由 DNS 劫持\n很多用户默认路由器的默认密码，攻击者可以侵入到路由管理员账号中，修改路由器的默认配置")]),t._v(" "),a("li",[t._v("攻击 DNS 服务器\n直接攻击 DNS 服务器，例如对 DNS 服务器进行 DDOS 攻击，可以是 DNS 服务器宕机，出现异常请求，还可以利用某些手段感染 dns 服务器的缓存，使给用户返回来的是恶意的 ip 地址")])]),t._v(" "),a("h4",{attrs:{id:"如何防御"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何防御"}},[t._v("#")]),t._v(" 如何防御")]),t._v(" "),a("ol",[a("li",[t._v("准备两个域名，随时切换")]),t._v(" "),a("li",[t._v("预埋 ip 地址，拿不到正确回包的时候直接发起 ip 请求")]),t._v(" "),a("li",[t._v("DNS over HTTPS\n"),a("ol",[a("li",[t._v("在 TLS 协议之上传输 DNS 内容。")])])]),t._v(" "),a("li",[t._v("DNS over HTTP\n"),a("ol",[a("li",[t._v("用 HTTP 协议来传输 DNS。")])])]),t._v(" "),a("li",[t._v("DNS over HTTPS\n"),a("ol",[a("li",[t._v("用 HTTPS 协议来传输 DNS\n"),a("blockquote",[a("p",[t._v("一般使用 http-dns 绕过运营商解析域名，达到防止 DNS 劫持的目的.")])])])])])]),t._v(" "),a("h3",{attrs:{id:"不能解决的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不能解决的问题"}},[t._v("#")]),t._v(" 不能解决的问题")]),t._v(" "),a("ol",[a("li",[t._v("客户端木马、问题")]),t._v(" "),a("li",[t._v("只能处理在传输层的问题")]),t._v(" "),a("li",[t._v("中间人攻击也没办法")])]),t._v(" "),a("h1",{attrs:{id:"https-性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https-性能优化"}},[t._v("#")]),t._v(" HTTPS 性能优化")]),t._v(" "),a("h2",{attrs:{id:"https-存在的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https-存在的问题"}},[t._v("#")]),t._v(" HTTPS 存在的问题")]),t._v(" "),a("blockquote",[a("p",[t._v("为什么现在还有 54%不支持 HTTPS？")])]),t._v(" "),a("h2",{attrs:{id:"慢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#慢"}},[t._v("#")]),t._v(" 慢")]),t._v(" "),a("ol",[a("li",[t._v("移动端慢 500ms 以上")])]),t._v(" "),a("h3",{attrs:{id:"tcp-协议优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp-协议优化"}},[t._v("#")]),t._v(" TCP 协议优化")]),t._v(" "),a("ul",[a("li",[t._v("fast open\n")])]),t._v(" "),a("h3",{attrs:{id:"应用层协议优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用层协议优化"}},[t._v("#")]),t._v(" 应用层协议优化")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("HSTS 减少 302 跳转\n")])]),t._v(" "),a("li",[a("p",[t._v("采用 HTTP2.0")]),t._v(" "),a("ol",[a("li",[t._v("HTTP1.x 是串行链路。")]),t._v(" "),a("li",[t._v("HTTP2.0 支持【多路复用】、【头部压缩】、【server push】")])])])]),t._v(" "),a("h3",{attrs:{id:"密钥计算加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密钥计算加速"}},[t._v("#")]),t._v(" 密钥计算加速")]),t._v(" "),a("ol",[a("li",[t._v("RSA 算法对整体性能影响 75%")]),t._v(" "),a("li",[t._v("优化方案（减少完全握手）\n"),a("ol",[a("li",[t._v("分布式 session cache")]),t._v(" "),a("li",[t._v("全局 session ticket")]),t._v(" "),a("li",[t._v("自定义 session ticket")])])]),t._v(" "),a("li",[t._v("RSA 异步代理计算")])]),t._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),a("h2",{attrs:{id:"贵"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#贵"}},[t._v("#")]),t._v(" 贵")]),t._v(" "),a("ol",[a("li",[t._v("服务器成本：HTTPS 性能不到 HTTP 1/10")]),t._v(" "),a("li",[t._v("证书：价格不一、容易过期、申请复杂")])]),t._v(" "),a("h1",{attrs:{id:"https-证书和部署问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https-证书和部署问题"}},[t._v("#")]),t._v(" HTTPS 证书和部署问题")])])}),[],!1,null,null,null);a.default=_.exports}}]);